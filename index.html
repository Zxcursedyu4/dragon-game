<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Evolution Bot</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(45deg, #000000, #4B0082);
            color: white;
            font-family: Arial, sans-serif;
            min-height: 100vh;
        }

        .screen {
            display: none;
            padding: 20px;
            text-align: center;
        }

        .active {
            display: block;
        }

        .dragon-img {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background-size: contain;
        }

        .buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            display: grid;
            gap: 10px;
        }

        button {
            background: #8A2BE2;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
        }

        button:disabled {
            background: #444;
            opacity: 0.7;
        }

        .hp-bar {
            width: 80%;
            height: 20px;
            background: #444;
            margin: 10px auto;
            border-radius: 10px;
            overflow: hidden;
        }

        .hp-fill {
            height: 100%;
            background: #FF0000;
            width: 100%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="screen active" id="welcome">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –∏–≥—Ä–æ–∫–∏!</h1>
        <p>–ö–æ–º–∞–Ω–¥–∞ @Dragon1EggBot –∂–µ–ª–∞–µ—Ç –≤–∞–º –ø—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã!</p>
        <button onclick="nextScreen('name')">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>

    <!-- –í—ã–±–æ—Ä –∏–º–µ–Ω–∏ -->
    <div class="screen" id="name">
        <h2>–í–∞—à –¥—Ä–∞–∫–æ–Ω—á–∏–∫! ü•∞</h2>
        <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" id="dragonName">
        <button onclick="setName()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω -->
    <div class="screen" id="main">
        <h2 id="dragonTitle"></h2>
        <div class="dragon-img" id="dragonImg"></div>
        <div class="hp-bar">
            <div class="hp-fill" id="hpFill"></div>
        </div>
        <div class="buttons">
            <button id="feedBtn" onclick="feed()">–ü–æ–∫–æ—Ä–º–∏—Ç—å</button>
            <button onclick="nextScreen('battle')">–°—Ä–∞–∂–∞—Ç—å—Å—è</button>
        </div>
    </div>

    <!-- –ë–æ–µ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div class="screen" id="battle">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å:</h2>
        <button onclick="startBattle(1)">–õ—ë–≥–∫–∏–π (1-10 XP)</button>
        <button onclick="startBattle(2)">–°—Ä–µ–¥–Ω–∏–π (10-50 XP)</button>
        <button onclick="startBattle(3)">–°–ª–æ–∂–Ω—ã–π (50-100 XP)</button>
        <button onclick="nextScreen('main')">–ù–∞–∑–∞–¥</button>
    </div>

    <script>
        let dragon = {
            name: '',
            xp: 0,
            stage: 'egg',
            hp: 100,
            maxHp: 100,
            lastFeed: 0,
            healTime: 0
        };

        function nextScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function setName() {
            dragon.name = document.getElementById('dragonName').value;
            localStorage.setItem('dragon', JSON.stringify(dragon));
            nextScreen('main');
            updateDragon();
        }

        function updateDragon() {
            document.getElementById('dragonTitle').textContent = dragon.name;
            // –õ–æ–≥–∏–∫–∞ —ç–≤–æ–ª—é—Ü–∏–∏
            const stages = {
                1000: 'baby',
                10000: 'adult',
                50000: 'elder',
                100000: 'ancient'
            };
            
            for(let xp in stages) {
                if(dragon.xp >= xp) dragon.stage = stages[xp];
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            document.getElementById('dragonImg').style.backgroundImage = 
                `url(https://example.com/dragons/${dragon.stage}.png)`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HP
            document.getElementById('hpFill').style.width = 
                `${(dragon.hp / dragon.maxHp) * 100}%`;
        }

        function feed() {
            if(Date.now() - dragon.lastFeed < 4 * 3600000) return;
            
            let xpGained = Math.floor(Math.random() * 10) + 1;
            if(dragon.stage === 'adult') xpGained *= 10;
            if(dragon.stage === 'elder') xpGained *= 100;
            
            dragon.xp += xpGained;
            dragon.lastFeed = Date.now();
            localStorage.setItem('dragon', JSON.stringify(dragon));
            updateDragon();
        }

        function startBattle(difficulty) {
            if(dragon.hp <= 0) return alert('–î—Ä–∞–∫–æ–Ω –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è!');
            
            // –õ–æ–≥–∏–∫–∞ –±–æ—è
            let enemyHp = difficulty * 50;
            while(enemyHp > 0 && dragon.hp > 0) {
                let dmg = Math.floor(Math.random() * 20) + difficulty * 10;
                dragon.hp -= dmg;
                enemyHp -= Math.floor(Math.random() * 20) + 10;
            }
            
            if(dragon.hp <= 0) {
                dragon.healTime = Date.now() + 43200000; // 12 —á–∞—Å–æ–≤
                alert('–î—Ä–∞–∫–æ–Ω –ø–æ–≤–µ—Ä–∂–µ–Ω! –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤.');
            } else {
                dragon.xp += Math.floor(Math.random() * (difficulty * 50));
            }
            
            updateDragon();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
        window.onload = () => {
            if(localStorage.getItem('dragon')) {
                dragon = JSON.parse(localStorage.getItem('dragon'));
                if(dragon.name) nextScreen('main');
                updateDragon();
            }
        };

        // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è HP
        setInterval(() => {
            if(dragon.hp < dragon.maxHp) dragon.hp++;
            updateDragon();
        }, 300);
    </script>
</body>
</html>